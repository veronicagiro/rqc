---
title: "Quantile Regression quasi stepwise model selection"
author: "Andrea Spano"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


## Intro

Do not forget to load libraries first

```{r}
require(quantreg)
require(rqc)
```

Package `rqc` exposes a single function: `rqcn` that returns a data frame of formulas 

## Model comparison 

Function `rqcn()` compares models from `base_formula` to `formula`. If argument `n_vars` is given, models building stops at `n_vars`. Clearly, `n_vars` cannot be larger than the number of variables included in the rhs of `formula`. 

The procedures works as followwing:

1. Variables are added one by one within each model degree. 

2. Within model degree one best model is chosen according to `kpi = 1-(fm$rho/fm_base$rho)`. 

3. Base model formula is chosen as base formula for next degree model


Example 1: all models from NULL to three variables 
```{r}
rqcn( formula = stack.loss~Air.Flow+Water.Temp+ Acid.Conc.,
formula_base = stack.loss ~1,
data = stackloss,
tau = .5, method = 'fn')
```

Example 2 : all models from NULL to two variables given a three variables formula 
```{r}
rqcn( formula = stack.loss~Air.Flow+Water.Temp+ Acid.Conc.,
formula_base = stack.loss ~1,
n_vars = 2,
data = stackloss,
tau = .5, method = 'fn')
```

Example 3 : all models from NULL to one variables given a three variables formula 
```{r}
rqcn( formula = stack.loss~Air.Flow+Water.Temp+ Acid.Conc.,
formula_base = stack.loss ~1,
n_vars = 1,
data = stackloss,
tau = .5, method = 'fn')
```

Example 4 : all models from first degree to two variables given a three variables formula 
```{r}
rqcn( formula = stack.loss~Air.Flow+Water.Temp+ Acid.Conc.,
formula_base = stack.loss ~Air.Flow,
n_vars = 2,
data = stackloss,
tau = .5, method = 'fn')
```
